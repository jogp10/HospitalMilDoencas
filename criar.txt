.mode columns
.headers on

drop table if exits PACIENTE;
drop table if exits PESSOAaCONTACTAR;
drop table if exits COLABORADOR;
drop table if exits GRAUdePARENTESCO;
drop table if exits ESPECIALIDADE;
drop table if exits PATOLOGIA;
drop table if exits SEGUROSdeSAUDE;
drop table if exits PacienteSegurosPatologia;
drop table if exits TRATA;
drop table if exits AGENDA;
drop table if exits DATAdeNASCIMENTO;


create table PACIENTE (
	idPaciente INTEGER PRIMARY KEY,
	Telefone INTEGER,
	Nome TEXT,
	Morada TEXT,
	DataDeNascimento DATE,
	Genero TEXT,
	Profissao  TEXT	
);

create table PESSOAaCONTACTAR (
	idPessoaAContactar INTEGER PRIMARY KEY,
	Telefone INTEGER,
	Nome TEXT,
	Morada TEXT,
	DataDeNascimento DATE,
	Genero TEXT

);

create table COLABORADOR (
	idColaborador INTEGER PRIMARY KEY,
	Telefone INTEGER,
	Nome TEXT,
	Morada TEXT,
	DataDeNascimento DATE,
	Genero TEXT,
	Estatuto TEXT,
	Comida TEXT,
	Nome TEXT

);

create table GRAUdePARENTESCO (
	idPaciente INTEGER CONSTRAINT fk_graudeparentesco_idpaciente REFERENCES PACIENTE (idPaciente) ON DELETE CASCADE
													  ON DELETE CASCADE
				PRIMARY KEY,
	idPessoaAContactar INTEGER CONSTRAINT fk_graudeparentesco_idpessoaacontactar REFERENCES PESSOAaCONTACTAR (idPessoaAContactar) ON DELETE CASCADE
													  ON DELETE CASCADE

);

create table ESPECIALIDADE (
	idEspecialidade INTEGER PRIMARY KEY,
	Nome TEXT

);

create table PATOLOGIA (
	idPatologia INTEGER PRIMARY KEY,
	Nome TEXT

);

create table SEGUROSdeSAUDE (
	idSegurosDeSaude INTEGER PRIMARY KEY,
	Nome TEXT,
	Validade DATE

);

create table PacienteSegurosPatologia (
	idPaciente INTEGER KEY CONSTRAINT fk_pacientesegurospatologia_idpaciente REFERENCES PACIENTE (idPaciente) ON DELETE CASCADE
											       ON DELETE CASCADE,
	idPatologia INTEGER KEY CONSTRAINT fk_pacientesegurospatologia_idpatologia REFERENCES PATOLOGIA (idPatologia) ON DELETE CASCADE
											       ON DELETE CASCADE,
	idSegurosDeSaude INTEGER KEY CONSTRAINT fk_pacientesegurospatologia_idsegurosdesaude REFERENCES SEGUROSdeSAUDE (idSegurosDeSaude) ON DELETE CASCADE
											       ON DELETE CASCADE,
											    	
	PRIMARY KEY (
        	idPaciente,
        	idPatologia,
        	idSegurosDeSaude
        	)

);

create table TRATA (
	idPatologia INTEGER CONSTRAINT fk_trata_idpaciente REFERENCES PACIENTE (idPaciente) ON DELETE CASCADE
											       ON DELETE CASCADE
				PRIMARY KEY,
	idMedico INTEGER CONSTRAINT fk_trata_idmedico REFERENCES COLABORADOR (idColaborador) ON DELETE CASCADE
												ON UPDATE CASCADE,
	Tratamento TEXT
);

create table AGENDA (
	idAgenda INTEGER PRIMARY KEY,
	HoraInicial TIME,
	HoraFinal TIME,
	Dia DATE,
	Local TEXT,
	idPaciente INTEGER CONSTRAINT fk_agenda_idpaciente REFERENCES PACIENTE (idPaciente) ON DELETE CASCADE
												ON UPDATE CASCADE,
	idColaborador INTEGER CONSTRAINT fk_agenda_idcolaborador REFERENCES COLABORADOR (idColaborador) ON DELETE CASCADE
												ON UPDATE CASCADE

);

create table DATAdeNASCIMENTO (
	DataDeNascimento DATE PRIMARY KEY,
	Idade INTEGER

);
